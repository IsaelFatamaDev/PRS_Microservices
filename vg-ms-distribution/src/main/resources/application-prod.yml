spring:
  application:
    name: ${NOMBRE_MICROSERVICIO:vg-ms-distribution}
  data:
    mongodb:
      uri: mongodb+srv://${MONGO_USERNAME}:${MONGO_PASSWORD}@${MONGO_HOST}/${MONGO_DATABASE}?retryWrites=true&w=majority&maxPoolSize=5&minPoolSize=1&maxIdleTimeMS=30000&serverSelectionTimeoutMS=5000
      auto-index-creation: false
  security:
    oauth2:
      resourceserver:
        jwt:
          issuer-uri: ${KEYCLOAK_ISSUER_URI}
          jwk-set-uri: ${KEYCLOAK_JWK_SET_URI}
          cache-duration: PT10M
  cloud:
    compatibility-verifier:
      enabled: false
  
  # Optimizaciones de memoria
  main:
    lazy-initialization: true
    banner-mode: off
  jmx:
    enabled: false
  output:
    ansi:
      enabled: never
  web:
    resources:
      cache:
        period: 3600
  webflux:
    multipart:
      max-in-memory-size: 512B
  reactor:
    netty:
      pool:
        max-connections: 5
        max-idle-time: 3s
        max-life-time: 20s
  jackson:
    serialization:
    pe.edu.vallegrande: INFO
    org.springframework: WARN
    org.springframework.web: INFO
    org.springframework.data.mongodb: WARN
    org.mongodb.driver: WARN
    reactor.netty: WARN
  pattern:
    console: "%d{HH:mm:ss} %-5level %logger{36} - %msg%n"
  file:
    name: /dev/null

management:
  endpoints:
    web:
      exposure:
        include: health
      base-path: /actuator
    jmx:
      exposure:
        exclude: "*"
  endpoint:
    health:
      show-details: never
      show-components: never
      cache:
        time-to-live: 30s
  info:
    env:
      enabled: false
    git:
      mode: simple
  metrics:
    enable:
      all: false

# Configuración de servicios externos
microservices:
  organization:
    name: ms-organizaciones
    url: ${ORGANIZATION_SERVICE_URL}
    timeout: 5000

organization-service:
  base-url: ${ORGANIZATION_SERVICE_BASE_URL}
  token: ${ORGANIZATION_SERVICE_TOKEN}

# Configuración JWE
jwe:
  internal:
    secret: ${JWE_INTERNAL_SECRET}
    expiration: ${JWE_INTERNAL_EXPIRATION}
    issuer: ${JWE_INTERNAL_ISSUER}
    audience: ${JWE_INTERNAL_AUDIENCE}

# Información de la aplicación
app:
  name: Microservicio de Distribución
  description: Microservicio para gestión de Distribución del Sistema JASS Digital
  version: 2.0.0
  organization: Valle Grande

# Configuración de validación
validation:
  user:
    code:
      prefix: USR
      length: 7
    document:
      dni-length: 8
      passport-min-length: 6
      passport-max-length: 12